<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PredictPro — Prediction Site</title>
  <style>
    :root{
      --bg:#000000;
      --page:#071018;
      --card:#0b1220;
      --accent:#00d4ff;
      --accent-2:#7c3aed;
      --muted:#9aa4b2;
      --text:#e6eef8;
      --success:#16a34a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.03);
    }

    *{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#04060a);color:var(--text)}
    header{background:linear-gradient(90deg,var(--card),#071226);padding:18px;border-bottom:1px solid rgba(255,255,255,0.03)}
    .wrap{max-width:1100px;margin:18px auto;padding:12px}

    .top{display:flex;align-items:center;gap:12px}
    .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#001;box-shadow:0 6px 24px rgba(124,58,237,0.18)}
    h1{margin:0;font-size:20px}
    .tag{font-size:12px;color:var(--muted)}

    nav{display:flex;gap:12px;margin:18px 0}
    nav a, nav button{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;color:var(--text);cursor:pointer;text-decoration:none}
    nav a:hover, nav button:hover{opacity:0.9}

    .card{background:linear-gradient(180deg,var(--card),#071226);border-radius:12px;padding:14px;box-shadow:0 10px 30px rgba(2,6,23,0.6);margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:16px}

    .match{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:linear-gradient(180deg,transparent, rgba(255,255,255,0.01));border:1px solid var(--glass);margin-bottom:10px}
    .muted{color:var(--muted);font-size:13px}
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021; padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(124,58,237,0.12)}

    input,textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);margin-top:8px}
    label{font-weight:700;font-size:13px;color:var(--muted)}
    .vip-badge{background:#ffd166;color:#051017;padding:6px 10px;border-radius:999px;font-weight:800}
    footer{color:var(--muted);text-align:center;margin-top:18px;padding-bottom:40px}
    .small{font-size:13px;color:var(--muted)}

    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.03);text-align:left}

    @media (max-width:980px){.grid{grid-template-columns:1fr}.logo{display:none}}
  </style>
</head>
<body>
  <header>
    <div class="wrap top">
      <div class="logo">PP</div>
      <div>
        <h1>PredictPro <span class="small">— Premium Predictions</span></h1>
        <div class="tag">Reliable sports predictions • VIP subscriptions via bank transfer</div>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="small">Contact: +23407084464197</div>
        <div class="small">Email: admin@predictpro.com</div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <nav>
      <a href="#" id="navHome">Home</a>
      <a href="about.html">About Us</a>
      <a href="#" id="navVIP">VIP</a>
      <a href="contact.html">Contact Us</a>
      <a href="#" id="navAdmin">Admin</a>
      <a href="admin-login.php" style="margin-left:auto" class="btn ghost">Server Admin Login</a>
    </nav>

    <section id="pageHome" class="card">
      <div class="grid">
        <div>
          <h2 style =""

            id="predictionsList" class="card" style="padding:12px"></div>

          <div class="card" style="margin-top:12px">
            <h3>Create or switch user</h3>
            <div class="muted">Sign in so VIP purchases can be linked to your account. When hosted on a server, submissions will be stored to the database.</div>
            <label>Display name</label>
            <input id="userName" placeholder="Your name" />
            <label>Phone</label>
            <input id="userPhone" placeholder="0801xxxxxxx" />
            <div style="display:flex;gap:8px;margin-top:12px">
              <button id="saveUser" class="btn">Save / Switch</button>
              <button id="logoutUser" class="btn ghost">Clear</button>
            </div>
            <div style="margin-top:10px" class="muted">Current user: <span id="currentUser">Not signed</span></div>
          </div>
        </div>

        <aside>
          <div class="card">
            <h3>VIP Benefits</h3>
            <ul class="muted">
              <li>Exclusive match predictions</li>
              <li>Detailed analysis & staking plan</li>
              <li>Private group access (WhatsApp/Telegram)</li>
            </ul>
          </div>

          <div class="card">
            <h3>Your VIP Status</h3>
            <div id="vipBox" class="muted">Not VIP</div>
            <div style="margin-top:12px"><button id="goVIP" class="btn">Subscribe (Bank Transfer)</button></div>
          </div>

          <div class="card" style="margin-top:12px">
            <h4>Quick Links</h4>
            <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
              <button onclick="show('vip')" class="btn ghost">VIP Page</button>
              <a href="admin-login.php" class="btn ghost">Admin Panel (server)</a>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section id="pageVIP" class="card" style="display:none">
      <h2>VIP Subscription — Bank Transfer</h2>
      <div class="muted">Follow the steps to pay by bank transfer. After payment, submit proof here. Admin will verify and grant VIP access to your account.</div>

      <div style="margin-top:14px;padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.03)">
        <strong>Bank:</strong> <span style="color:var(--text)">Example Bank</span><br>
        <strong>Account name:</strong> <span style="color:var(--text)">PredictPro Services</span><br>
        <strong>Account number:</strong> <span style="color:var(--text)">0938336333</span><br>
        <strong>Amount (NGN):</strong> <span id="vipAmount">10000</span>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Submit payment proof</h3>
        <!-- This form posts to submit_proof.php (server). JS will try AJAX; if endpoint not available it falls back to localStorage -->
        <form id="proofForm" enctype="multipart/form-data" method="post" action="submit_proof.php" novalidate>
          <label>Paid by (name)</label>
          <input id="payName" name="payName" />
          <label>Phone used for payment</label>
          <input id="payPhone" name="payPhone" />
          <label>Amount paid (NGN)</label>
          <input id="payAmount" name="payAmount" type="number" value="10000" />
          <label>Transaction/reference ID</label>
          <input id="payRef" name="payRef" placeholder="e.g. 20250811ABC" />
          <label>Upload screenshot (optional)</label>
          <input id="payFile" name="payFile" type="file" accept="image/*" />
          <div style="display:flex;gap:8px;margin-top:12px">
            <button id="submitProof" type="button" class="btn">Submit proof</button>
            <button id="downloadProofs" type="button" class="btn ghost">Export Submissions (Admin)</button>
          </div>
          <div id="submitMsg" class="muted" style="margin-top:10px"></div>
        </form>
      </div>
    </section>

    <section id="pageAdmin" class="card" style="display:none">
      <h2>Admin Panel (Client-side demo)</h2>
      <div id="adminLoginBox">
        <label>Admin password (demo)</label>
        <input id="adminPass" type="password" />
        <div style="margin-top:8px;display:flex;gap:8px"><button id="adminLogin" class="btn">Login</button><button id="adminLogout" class="btn ghost" style="display:none">Logout</button></div>
        <div class="muted" style="margin-top:8px">This client-side admin is only a demo. Use server admin (link above) when you deploy.</div>
      </div>

      <div id="adminArea" style="display:none;margin-top:12px">
        <h3>Manage predictions</h3>
        <label>Match or title</label>
        <input id="predTitle" placeholder="Team A vs Team B" />
        <label>Prediction text</label>
        <input id="predText" placeholder="1 - 0 or Win" />
        <label>Type</label>
        <select id="predType"><option value="free">Free</option><option value="vip">VIP</option></select>
        <div style="margin-top:8px;display:flex;gap:8px"><button id="addPred" class="btn">Add prediction</button><button id="clearPredictions" class="btn ghost">Clear all</button></div>

        <h3 style="margin-top:16px">Pending payments (client demo)</h3>
        <div id="paymentsBox" style="max-height:260px;overflow:auto"></div>
        <div style="margin-top:8px;display:flex;gap:8px"><button id="exportPayments" class="btn">Export JSON</button><button id="confirmAll" class="btn ghost">Confirm all</button></div>

        <h3 style="margin-top:16px">Existing predictions</h3>
        <div id="predictionsAdmin"></div>
      </div>
    </section>

    <footer>
      <div class="small">When you move to PHP hosting, use server-side admin & the <code>submit_proof.php</code> endpoint — this page will continue to work as a demo until then.</div>
    </footer>
  </main>

  <script>
    // ----- helpers -----
    const $ = id => document.getElementById(id);
    const uid = ()=> 'u' + Date.now() + Math.floor(Math.random()*99);

    // ----- nav -----
    $('navHome').addEventListener('click', ()=>show('home'));
    $('navVIP').addEventListener('click', ()=>show('vip'));
    $('navAdmin').addEventListener('click', ()=>show('admin'));
    $('goVIP').addEventListener('click', ()=>show('vip'));
    function show(page){
      $('pageHome').style.display = page==='home'? 'block' : 'none';
      $('pageVIP').style.display = page==='vip'? 'block' : 'none';
      $('pageAdmin').style.display = page==='admin'? 'block' : 'none';
    }

    // ----- storage helpers -----
    function load(key, fallback){ try { return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); } catch(e){ return fallback; } }
    function saveLocal(k,v){ localStorage.setItem(k, JSON.stringify(v)); }

    // ----- initial data -----
    let users = load('ps_users', {});
    let predictions = load('ps_predictions', [
      {id:'p1',title:'6ttrewwqq vs Manunited',text:'2 - 1',type:'free'},
      {id:'p2',title:'Real Madrid vs Barca',text:'1 - 2',type:'vip'}
    ]);
    let payments = load('ps_payments', []);
    let currentUserId = localStorage.getItem('ps_current_user') || null;

    // ----- render functions -----
    function renderPredictions(){
      const list = $('predictionsList'); list.innerHTML='';
      const user = users[currentUserId];
      predictions.forEach(p=>{
        const el = document.createElement('div'); el.className='match';
        const left = document.createElement('div');
        left.innerHTML = `<div style="font-weight:800">${p.title} ${p.type==='vip'? '<span class="vip-badge">VIP</span>':''}</div><div class="muted">${p.type==='vip'? 'VIP prediction' : 'Free prediction'}</div>`;
        const right = document.createElement('div');
        if(p.type==='vip' && (!user || !user.vip)){
          right.innerHTML = `<div class="muted">VIP only</div><button class="btn" onclick="show('vip')">Get VIP</button>`;
        } else {
          right.innerHTML = `<div style="font-weight:800">${p.text}</div>`;
        }
        el.appendChild(left); el.appendChild(right); list.appendChild(el);
      });
    }

    function renderUser(){
      if(currentUserId && users[currentUserId]){
        $('currentUser').textContent = users[currentUserId].name + ' (' + (users[currentUserId].phone||'') + ')';
        $('vipBox').textContent = users[currentUserId].vip ? 'VIP ✓' : 'Not VIP';
      } else { $('currentUser').textContent = 'Not signed'; $('vipBox').textContent = 'Not VIP'; }
    }

    function renderPaymentsAdmin(){
      const box = $('paymentsBox'); box.innerHTML='';
      if(payments.length===0){ box.innerHTML = '<div class="muted">No submissions yet.</div>'; return; }
      const table = document.createElement('table');
      table.innerHTML = `<thead><tr><th>Name</th><th>Phone</th><th>Amount</th><th>Ref</th><th>Time</th><th>Actions</th></tr></thead>`;
      const tb = document.createElement('tbody');
      payments.forEach(p=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${p.name}</td><td>${p.phone||''}</td><td>${p.amount}</td><td>${p.ref||''}</td><td>${new Date(p.ts).toLocaleString()}</td>`;
        const td = document.createElement('td');
        const btnConfirm = document.createElement('button'); btnConfirm.className='btn'; btnConfirm.textContent = p.confirmed? 'Confirmed' : 'Confirm';
        btnConfirm.disabled = p.confirmed;
        btnConfirm.addEventListener('click', ()=>{ confirmPayment(p.id); renderPaymentsAdmin(); renderPredictions(); });
        const btnView = document.createElement('button'); btnView.className='btn ghost'; btnView.style.marginLeft='6px'; btnView.textContent='View';
        btnView.addEventListener('click', ()=>{ if(p.imageBase64){ const w = window.open(); w.document.write('<img src="'+p.imageBase64+'" style="max-width:100%">'); } else alert('No image attached'); });
        td.appendChild(btnConfirm); td.appendChild(btnView);
        tr.appendChild(td); tb.appendChild(tr);
      });
      table.appendChild(tb); box.appendChild(table);
    }

    function renderPredAdmin(){
      const box = $('predictionsAdmin'); box.innerHTML='';
      if(predictions.length===0){ box.innerHTML='<div class="muted">No predictions</div>'; return; }
      const table = document.createElement('table');
      table.innerHTML = `<thead><tr><th>Title</th><th>Text</th><th>Type</th><th>Action</th></tr></thead>`;
      const tb = document.createElement('tbody');
      predictions.forEach(p=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${p.title}</td><td>${p.text}</td><td>${p.type}</td>`;
        const td = document.createElement('td');
        const del = document.createElement('button'); del.className='btn ghost'; del.textContent='Delete'; del.addEventListener('click', ()=>{ if(confirm('Delete?')){ predictions = predictions.filter(x=>x.id!==p.id); saveLocal('ps_predictions', predictions); renderPredAdmin(); renderPredictions(); } });
        td.appendChild(del); tr.appendChild(td); tb.appendChild(tr);
      });
      table.appendChild(tb); box.appendChild(table);
    }

    // ----- Save helper wrapper -----
    function saveAll(){
      saveLocal('ps_users', users);
      saveLocal('ps_predictions', predictions);
      saveLocal('ps_payments', payments);
    }

    // ----- Payments: AJAX submit with fallback -----
    async function submitProofAjax(formElem){
      const fd = new FormData(formElem);
      // add current user phone if present
      if(currentUserId && users[currentUserId] && !fd.get('payPhone')) fd.set('payPhone', users[currentUserId].phone || '');
      try {
        const res = await fetch('submit_proof.php', { method: 'POST', body: fd });
        if(!res.ok) throw new Error('Server returned ' + res.status);
        const text = await res.text();
        // if server redirects or confirms, show success
        $('submitMsg').textContent = 'Submitted to server. Admin will review.';
        // optional: redirect or clear form
        formElem.reset();
        return true;
      } catch (e) {
        // fallback to localStorage (demo)
        console.warn('AJAX submit failed — falling back to localStorage', e);
        const file = $('payFile').files[0];
        let base64 = null;
        if(file){
          base64 = await toBase64(file);
        }
        const data = {
          id: 'pay' + Date.now(),
          name: fd.get('payName') || '',
          phone: fd.get('payPhone') || '',
          amount: fd.get('payAmount') || '',
          ref: fd.get('payRef') || '',
          imageBase64: base64,
          ts: Date.now(),
          confirmed: false
        };
        payments.push(data);
        saveLocal('ps_payments', payments);
        $('submitMsg').textContent = 'Saved locally (demo). When you deploy the server, submissions will go to the backend.';
        formElem.reset();
        renderPaymentsAdmin();
        return false;
      }
    }

    $('submitProof').addEventListener('click', async ()=> {
      const form = $('proofForm');
      const name = $('payName').value.trim() || $('userName').value.trim();
      const phone = $('payPhone').value.trim() || $('userPhone').value.trim();
      const amount = Number($('payAmount').value) || Number($('vipAmount').textContent);
      if(!name || !phone || !amount){ $('submitMsg').textContent = 'Please provide name, phone and amount.'; return; }
      $('submitMsg').textContent = 'Submitting...';
      await submitProofAjax(form);
    });

    function toBase64(file){ return new Promise((res,rej)=>{ const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=()=>rej(); r.readAsDataURL(file); }); }

    // ----- Admin demo actions -----
    $('adminLogin').addEventListener('click', ()=>{
      const pass = $('adminPass').value;
      // demo password check (client-side). Replace with server auth in production.
      if(pass === 'admin123'){
        $('adminLoginBox').style.display='none';
        $('adminArea').style.display='block';
        $('adminLogout').style.display='inline-block';
        renderPaymentsAdmin(); renderPredAdmin();
      } else alert('Wrong password (demo). Use server admin for production.');
    });
    $('adminLogout').addEventListener('click', ()=>{ $('adminLoginBox').style.display='block'; $('adminArea').style.display='none'; $('adminLogout').style.display='none'; });

    $('addPred').addEventListener('click', ()=> {
      const t = $('predTitle').value.trim(); const txt = $('predText').value.trim(); const type = $('predType').value;
      if(!t||!txt){ alert('Please add title and text'); return; }
      predictions.push({id:'p'+Date.now(),title:t,text:txt,type});
      saveLocal('ps_predictions', predictions);
      $('predTitle').value=''; $('predText').value='';
      renderPredAdmin(); renderPredictions();
    });

    $('clearPredictions').addEventListener('click', ()=>{ if(confirm('Clear all predictions?')){ predictions=[]; saveLocal('ps_predictions', predictions); renderPredAdmin(); renderPredictions(); } });

    function confirmPayment(id){
      const p = payments.find(x=>x.id===id); if(!p) return;
      p.confirmed = true;
      saveLocal('ps_payments', payments);
      // grant VIP to user if phone matches
      let user = Object.values(users).find(u=>u.phone && u.phone===p.phone);
      if(!user){
        const newId = uid();
        users[newId] = {id:newId,name:p.name,phone:p.phone,vip:true};
        currentUserId = newId;
        localStorage.setItem('ps_current_user', currentUserId);
      } else {
        user.vip = true;
      }
      saveAll();
      renderUser();
      alert('Payment confirmed and VIP granted (demo).');
    }

    $('exportPayments').addEventListener('click', ()=>{ const data = JSON.stringify(payments, null, 2); download('payments.json', data); });
    $('downloadProofs').addEventListener('click', ()=>{ const data = JSON.stringify(payments, null, 2); download('payments.json', data); });
    $('confirmAll').addEventListener('click', ()=>{ if(confirm('Confirm all payments?')){ payments.forEach(p=>p.confirmed=true); saveLocal('ps_payments', payments); payments.forEach(p=>{ let user = Object.values(users).find(u=>u.phone && u.phone===p.phone); if(!user){ const newId=uid(); users[newId]={id:newId,name:p.name,phone:p.phone,vip:true}; } else user.vip=true; }); saveAll(); renderPaymentsAdmin(); renderUser(); alert('All confirmed (demo)'); } });

    function download(filename, text){ const a = document.createElement('a'); a.href = 'data:text/json;charset=utf-8,' + encodeURIComponent(text); a.download = filename; a.click(); }

    // ----- user management -----
    $('saveUser').addEventListener('click', ()=>{ const name = $('userName').value.trim(); const phone = $('userPhone').value.trim(); if(!name){ alert('Enter name'); return; } const id = uid(); users[id] = {id,name,phone,vip:false}; currentUserId = id; localStorage.setItem('ps_current_user', currentUserId); saveLocal('ps_users', users); renderUser(); renderPredictions(); alert('User saved (demo).'); });
    $('logoutUser').addEventListener('click', ()=>{ if(confirm('Clear current user?')){ currentUserId = null; localStorage.removeItem('ps_current_user'); renderUser(); renderPredictions(); } });

    // ----- init -----
    renderPredictions(); renderUser(); renderPredAdmin(); renderPaymentsAdmin();
  </script>
</body>
</html>
